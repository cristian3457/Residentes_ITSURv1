function cargarDatos(){let t=$("#listaUsuarios");t.append("<thead><tr><th> Código</th><th> Email</th><th>Editar Datos</th><th>Eliminar</th></tr><thead/>"),t.append("<tbody>"),$.ajax({type:"POST",url:"ws/WSUsuarios.asmx/getAll",contentType:"application/json; utf-8",dataType:"json",success:function(e){let o=JSON.parse(e.d);for(i=0;i<o.length;i++)t.append("<tr><td>"+o[i].id_usuario+" </td><td>"+o[i].email+"</td><td><input id='btnEditar' type='button' onclick='Editar(this)' value='Editar Datos' class='btn btn-info mb-4'/></td><td><input id='btnEliminar' onclick='Eliminar(this)' type='button' value='Eliminar' class='btn btn-danger mb-4'/></td></tr>");t.append("</tbody>"),$("#listaUsuarios").DataTable()},error:function(t,i,e){"System.Security.SecurityException"==t.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}function Registrar(){window.sessionStorage.removeItem("id_usuario"),$("#divContenido").load("FrmCrearUsuarios.aspx")}function Eliminar(t){$("#mdlConfirmar").modal("show");let i=$(t).closest("tr").children().first().text();$("#confirmarEliminar").unbind("click"),$("#confirmarEliminar").click(function(){eliminar(i),window.sessionStorage.removeItem("id_usuario")})}function eliminar(t){var i="{ 'id' : '"+t+"'}";$.ajax({type:"POST",url:"ws/WSUsuarios.asmx/delete",data:i,contentType:"application/json; utf-8",dataType:"json",success:function(t){t.d&&$("#mdlInformacion").modal("show")},error:function(t,i,e){"System.Exception"==t.responseJSON.ExceptionType?($("#msgError").text(t.responseJSON.Message),$("#mdlError").modal().show()):"System.Security.SecurityException"==t.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}function Editar(t){let i=$(t).closest("tr").children().first().text();window.sessionStorage.removeItem("id_usuario"),window.sessionStorage.setItem("id_usuario",i),$("#divContenido").load("FrmCrearUsuarios.aspx")}$(document).ready(function(){$("#listaUsuarios").empty(),cargarDatos(),$("#btnAceptar").click(function(){$("#listaUsuarios").empty(),cargarDatos()})});