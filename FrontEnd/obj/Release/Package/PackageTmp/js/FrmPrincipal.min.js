function cargarDatos(){let t=$("#grvLista");t.append("<thead><tr><th> Código</th><th> Nombre</th> <th> Email </th><th>Estado</th> <th>Municipio</th><th>Editar</th><th>Eliminar</th></tr><thead/>"),t.append("<tbody>"),$.ajax({type:"POST",url:"ws/WSEmpresas.asmx/getAll",contentType:"application/json; utf-8",dataType:"json",success:function(e){let n=JSON.parse(e.d);for(i=0;i<n.length;i++)t.append("<tr><td>"+n[i].id_empresa+" </td><td>"+n[i].nombre+" </td> <td>"+n[i].email+"</td><td>"+n[i].estado+" </td> <td>"+n[i].municipio+"<td><input id='btnEditar' type='button' onclick='Editar(this)' value='Editar' class='btn btn-info mb-4'/></td><td><input id='btnEliminar' onclick='Eliminar(this)' type='button' value='Eliminar' class='btn btn-danger mb-4'/></td></tr>");t.append("</tbody>"),$("#grvLista").DataTable()},error:function(t,e,i){"System.Security.SecurityException"==t.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}function eliminar(t){var e="{ 'id' : '"+t+"'}";$.ajax({type:"POST",url:"ws/WSEmpresas.asmx/delete",data:e,contentType:"application/json; utf-8",dataType:"json",success:function(t){t.d&&$("#mdlInformacion").modal("show")},error:function(t,e,i){"System.Exception"==t.responseJSON.ExceptionType?($("#msgError").text(t.responseJSON.Message),$("#mdlError").modal().show()):"System.Security.SecurityException"==t.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}function Eliminar(t){$("#mdlConfirmar").modal("show");let e=$(t).closest("tr").children().first().text();$("#confirmarEliminar").unbind("click"),$("#confirmarEliminar").click(function(){eliminar(e)})}function Editar(t){let e=$(t).closest("tr").children().first().text();window.sessionStorage.removeItem("id_empresa"),window.sessionStorage.setItem("id_empresa",e),$("#divContenido").load("FrmRegistrarDatos.aspx")}function Registrar(){window.sessionStorage.removeItem("id_empresa"),$("#divContenido").load("FrmRegistrarDatos.aspx")}$(document).ready(function(){$("#grvLista").empty(),cargarDatos(),$("#btnAceptar").unbind("click"),$("#btnAceptar").click(function(){$("#grvLista").empty(),cargarDatos()}),"Empresa"==$("#contenido_txtTipoUsuario").val()&&$("#divOfertas").load("FrmPresentarOfertas.aspx")});