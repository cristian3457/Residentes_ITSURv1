function cerrar_modal(e){window.sessionStorage.removeItem("id_oferta"),window.location.assign("FrmContenedor.aspx")}function cargarDatosEditar(e){$.ajax({type:"POST",url:"ws/WSOfertas.asmx/getOne",data:e,contentType:"application/json; utf-8",dataType:"json",success:function(e){let t=JSON.parse(e.d);$("#contenido_txtPerfil").val(t[0].perfil),$("#contenido_txtSueldo").val(t[0].sueldo),$("#contenido_ddlCarrera").val(t[0].carrera),$("#contenido_ddlCarrera").change(),$("#txtSolicito").val(t[0].solicito),$("#txtRequisitos").val(t[0].requisitos),$("#txtActividades").val(t[0].actividades)},error:function(e,t,a){"System.Exception"==e.responseJSON.ExceptionType?($("#msgError").text(e.responseJSON.Message),$("#mdlError").modal().show()):"System.Security.SecurityException"==e.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}function cargarCarreras(){$.ajax({type:"POST",url:"ws/WSCarreras.asmx/getCarreras",contentType:"application/json; utf-8",dataType:"json",success:function(e){let t=JSON.parse(e.d);for($("#contenido_ddlCarrera").empty(),i=0;i<t.length;i++)$("#contenido_ddlCarrera").append('<option value="'+t[i].carrera+'">'+t[i].carrera+"</option>")},error:function(e,t,a){$("#msgError").text("HA OCURRIDO UN ERROR, POR FAVOR VUELVELO A INTENTAR"+t),$("#mdlError").modal().show()}})}$(document).ready(function(){var e=document.getElementById("contenido_txtPerfil"),t=document.getElementById("txtSolicito"),a=document.getElementById("txtRequisitos"),o=document.getElementById("txtActividades"),r=document.getElementById("contenido_ddlCarrera");cargarCarreras(),$("#btnAceptarInfo").click(function(){window.location.assign("FrmContenedor.aspx")});e.value.trim(),t.value.trim(),a.value.trim(),o.value.trim(),r.value;$("#btnRegistrar").click(function(){if($("#FrmSolicitarResidentes").data("bootstrapValidator").validate(),$("#FrmSolicitarResidentes").data("bootstrapValidator").isValid()){var s=e.value.trim(),i=t.value.trim(),n=a.value.trim(),d=o.value.trim(),l=r.value,c=$("#contenido_txtEmailUsuario").val(),m=window.sessionStorage.getItem("id_oferta");if(null!=c&&null==m){c=$("#contenido_txtEmailUsuario").val();var p=$("#contenido_txtSueldo").val();let e={};if(e.perfil=s,e.carrera=l,e.sueldo=p,e.solicito=i,e.requisitos=n,e.actividades=d,e.email=c,"REGISTRAR"==document.getElementById("btnRegistrar").value){var g="{'info' : '"+JSON.stringify(e)+"'}";$.ajax({type:"POST",url:"ws/WSOfertas.asmx/insert",data:g,contentType:"application/json; utf-8",dataType:"json",success:function(e){parseInt(e.d)>0?$("#mdlInformacion").modal("show"):($("#msgError").text("HA OCURRIDO UN ERROR, POR FAVOR VUELVELO A INTENTAR"),$("#mdlError").modal().show())},error:function(e,t,a){"System.Exception"==e.responseJSON.ExceptionType?($("#msgError").text(e.responseJSON.Message),$("#mdlError").modal().show()):"System.Security.SecurityException"==e.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}}var u=$("#btnRegistrar").val();if(null!=m&&"Editar"==u){c=$("#contenido_txtEmailUsuario").val(),p=$("#contenido_txtSueldo").val();let e={};e.id_oferta=m,e.perfil=s,e.carrera=l,e.sueldo=p,e.solicito=i,e.requisitos=n,e.actividades=d;g="{'info' : '"+JSON.stringify(e)+"'}";$.ajax({type:"POST",url:"ws/WSOfertas.asmx/update",data:g,contentType:"application/json; utf-8",dataType:"json",success:function(e){e.d?(window.sessionStorage.removeItem("id_oferta"),$("#mdlInformacion").modal("show")):($("#msgError").text("HA OCURRIDO UN ERROR, POR FAVOR VUELVELO A INTENTAR"),$("#mdlError").modal().show())},error:function(e,t,a){"System.Exception"==e.responseJSON.ExceptionType?($("#msgError").text(e.responseJSON.Message),$("#mdlError").modal().show()):"System.Security.SecurityException"==e.responseJSON.ExceptionType&&Response.load("FrmLogin.aspx")}})}document.getElementById("btnAceptar").addEventListener("click",cerrar_modal)}else $("#mdlValidacionCampos").modal("show")}),$("#FrmSolicitarResidentes").bootstrapValidator({framework:"bootstrap",excluded:[":disabled",":hidden"],fields:{ctl00$contenido$txtPerfil:{message:"Perfil no valido",validators:{notEmpty:{message:"Este campo es obligatorio y no debe estar vacio."},regexp:{regexp:/^[a-zA-Z\s]+$/,message:"El perfil deben solamente de letras"},stringLength:{min:5,max:50,message:"La longitud del perfil debe ser entre 5 y 50 caracteres"}}},ctl00$contenido$txtSueldo:{message:"Sueldo no valido",validators:{stringLength:{max:20,message:"La longitud del sueldo puede contener hasta 20 caracteres"}}},ctl00$contenido$ddlCarrera:{validators:{notEmpty:{message:"Este campo es obligatorio y no debe estar vacio."},callback:{message:"La carrera no es valida se debe seleccionar una correcta",callback:function(e,t,a){return e.length>8&&e.length<28}}}},txtSolicito:{message:"texto no valido",validators:{notEmpty:{message:"Este campo es obligatorio y no debe estar vacio."},regexp:{regexp:/^[a-zA-Z0-9\s\-]+$/,message:"El campo no acepta caracteres especiales"},stringLength:{min:10,max:150,message:"La longitud de este campo debe ser de entre 10 y 150 caracteres"}}},txtRequisitos:{message:"texto no valido",validators:{notEmpty:{message:"Este campo es obligatorio y no debe estar vacio."},regexp:{regexp:/^[a-zA-Z0-9\s\-]+$/,message:"El campo no acepta caracteres especiales"},stringLength:{min:10,max:150,message:"La longitud de este campo debe ser de entre 10 y 150 caracteres"}}},txtActividades:{message:"Texto no valido",validators:{notEmpty:{message:"Este campo es obligatorio y no debe estar vacio."},regexp:{regexp:/^[a-zA-Z\s\-]+$/,message:"El campo no acepta caracteres especiales"},stringLength:{min:10,max:150,message:"La longitud de este campo debe ser de entre 10 y 150 caracteres"}}}}});$("#contenido_txtEmailUsuario").val();var s=window.sessionStorage.getItem("id_oferta");null!=s&&($("#btnRegistrar").val("Editar"),$(".titleOfertas").text("EDITAR DATOS PARA LAS OFERTAS DE RESIDENCIAS"),cargarDatosEditar("{ 'id_oferta' : '"+s+"'}"));document.getElementById("btnAceptar").addEventListener("click",cerrar_modal),$("#btnCancelar").click(function(){window.sessionStorage.removeItem("id_oferta"),window.location.assign("FrmContenedor.aspx")})});